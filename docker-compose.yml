version: '3.7'
services:
  clickhouse:
    image: yandex/clickhouse-server:21.5.5.12-alpine
    volumes:
      - "./init-db.sh:/docker-entrypoint-initdb.d/init-db.sh"
    ulimits:
      nofile: 262144
    ports:
      - 8123:8123
    env_file:
      - .env
    # environment:
    #   - CLICKHOUSE_USER
    #   - CLICKHOUSE_PASSWORD
  api:
    build: ./
    init: true
    ports:
      - 3030:3030
    env_file:
      - .env